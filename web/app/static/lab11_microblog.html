<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


  <link rel="stylesheet" href="static/css/open-iconic-bootstrap.css">
  <link rel="stylesheet" href="static/css/mytwitter.css">
  <title>My Twitter</title>
</head>

<body>
  <nav class="navbar navbar-expand-md navbar-light">
    <div class="container">
      <div class="navbar-nav">
        <a class="nav-item nav-link" href="#"><span class="oi oi-home"></span> Home</a>
        <a class="nav-item nav-link" href="#"><span class="oi oi-bolt"></span> Moments</a>
        <a class="nav-item nav-link" href="#"><span class="oi oi-bell"></span> Notifications</a>
        <a class="nav-item nav-link" href="#"><span class="oi oi-envelope-open"></span> Messages</a>
      </div>
      <form class="form-inline">
        <input class="form-control" id="nav-search" type="search" placeholder="Search Twitter"> &nbsp;
        <img class="tw-user-small rounded-circle" src="static/img/S__22249631.jpg"> &nbsp;
        <!-- <button class="btn" id="nav-tweet-btn" type="submit">Tweet</button> -->
      </form>
    </div>
  </nav>

  <div class="container">
    <div class="row">
      <div id="left_3" class="col-md-3">
        <div class="content-box">Account details</div>
        <div class="content-box">Trends</div>
      </div>
      <div id="center_6" class="col-md-6">
        <div class="content-box">
          <div class="new-tweet-row">
            <div class="new-tweet-row">
              <div class="row">
                <div class="col-md-2">
                  <img src="static/img/newpi.jpg" class="tw-user-small rounded-circle mx-auto d-block">
                </div>
                <div class="col-md-9">
                  <form>
                    <!-- <input id="tweet-input" class="form-control" type="text" placeholder="Whats happening?"> -->
                    <input id="tweet-input" class="form-control" type="text" placeholder="name?">
                    <input id="tweet-input" class="form-control" type="text" placeholder="Messages?">
                    <input id="tweet-input" class="form-control" type="text" placeholder="email?">
                    <!-- <button id= "button_post"class="button">Post</button> -->
                    <button class="btn" id="nav-tweet-btn" type="submit">Tweet</button>
                  </form>
                </div>
              </div>
            </div>
            <div class="tweet">
              <div class="row">
                <div class="col-md-2 text-center">
                  <img class="tw-user-medium rounded-circle" src="static/img/newpi.jpg">
                </div>
                <div class="col-md-10">
                  <div class="row tweet-info">
                    <div class="col-md-auto">
                      <span class="tweet-username">Hamster News</span>
                      <span class="tweet-usertag text-muted">@hamsternews</span>-
                      <span class="tweet-age text-muted">1d</span>
                    </div>
                    <div class="col tweet-arrow text-muted">
                      <span class="oi oi-arrow-thick-bottom float-right"></span>
                    </div>
                  </div>
                  <div class="tweet-text">
                    Hamsters like to run all night long, keeping
                    you awake!!!
                  </div>
                  <div class="tweet-media">
                    <img class="img-fluid rounded" src="static/img/newpi.jpg">
                  </div>
                  <div class="tweet-media">
                    pictures or videos
                  </div>
                  <div class="row text-muted">
                    <div class="col-md-2"><span class="oi oi-bullhorn"></span></div>
                    <div class="col-md-2"><span class="oi oi-loop-circular"></span></div>
                    <div class="col-md-2"><span class="oi oi-heart"></span></div>
                    <div class="col-md-2"><span class="oi oi-envelope-open"></span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="right_3" class="col-md-3">
        <div class="content-box">Who to follow</div>
      </div>
    </div>

    <script>
      function populate_table(contact_data) {
        $('#phonebook-table').bootstrapTable({
          data: contact_data
        });
      }
      $(document).ready(function () {
        (function () {
          $.getJSON("lab11/contacts", populate_table);
        })();
      });

      // refresh the table after a read update
      function refresh_table(contact_data) {
        $('#phonebook-table').bootstrapTable('load', contact_data);
      }


      $("#addPhoneNumberForm").submit(function (event) {
        // prevent default html form submission action
        event.preventDefault();


        // pack the inputs into a dictionary
        var formData = {};
        $(":input").each(function () {
          var key = $(this).attr('name');
          var val = $(this).val();


          if (key != 'submit') {
            formData[key] = val;
          }


        });


        var $form = $(this);
        var url = $form.attr("action");


        // make a POST call to the back end w/ a callback to refresh the table
        $.post(url, formData, function (contact_data) {
          refresh_table(contact_data);
          clearForm();
        });
      });


      function clearForm() {
        $('#addPhoneNumberForm')[0].reset();
        $('#entryid').val('');
      }

      function actionFormatter(value, row, index) {
        return [
          '<a class="edit" href="javascript:void(0)" title="Like">',
          '‚úèÔ∏è',
          '</a>  ',
          '<a class="remove" href="javascript:void(0)" title="Remove">',
          'üóëÔ∏è',
          '</a>'
        ].join('')
      }


      window.operateEvents = {
        'click .edit': function (e, value, row, index) {
          prePopulateForm(row);
        },
        'click .remove': function (e, value, row, index) {
          removeItem(row);
        }
      }


      function prePopulateForm(row) {
        $('#addPhoneNumberForm')[0].reset();
        $('#firstname').val(row.firstname);
        $('#lastname').val(row.lastname);
        $('#phone').val(row.phone);
        $('#entryid').val(row.id);
      }

      function removeItem(row) {
        if (!confirm("Delete " + row.firstname + ' ' + row.lastname + '?')) {
          return false;
        }
        var url = "lab10/remove_contact"
        var formData = { 'id': row.id };
        $.post(url, formData, function (contact_data) {
          refresh_table(contact_data);
        });
      }


      function toggleView() {
        if ($('#contact_display').attr('hidden')) {
          $('#contact_display').removeAttr('hidden');
          $('#add-edit').attr('hidden', 'hidden');
        } else {
          $('#contact_display').attr('hidden', 'hidden');
          $('#add-edit').removeAttr('hidden');
        }
      }


      $("#add_contact").click(function () {
        clearForm();
        toggleView();
      });

      $("#clear_form").click(function () {
        clearForm();
      });


      $("#cancel_form").click(function () {
        clearForm();
        toggleView();
      });

      function populate_table(contact_data) {
        $('#phonebook-table').bootstrapTable({
          data: contact_data
        });
        $('#phonebook-table').bootstrapTable('hideColumn', 'id');
      }


    </script>
</body>



</html>